<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Cuenta - Gestión de Jubilaciones</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%232563eb'><path d='M20,3H4A2.2,2.2,0,0,0,1.8,5.2V18.8A2.2,2.2,0,0,0,4,21H20a2.2,2.2,0,0,0,2.2-2.2V5.2A2.2,2.2,0,0,0,20,3ZM4,19V5H20V19Z'/></svg>">

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <link rel="stylesheet" href="/static/styles.css?v=40">
    <script type="module" src="/static/script.js?v=29"></script>

    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: transparent;
        }

        .login-container {
            width: 100%;
            max-width: 400px;
            padding: 2rem;
        }
    </style>
    <!-- Turnstile CAPTCHA -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>

<body>

    <section id="auth-section" class="glass-card login-container"
        style="max-width: 450px; padding: 3rem; background: rgba(255, 255, 255, 0.1) !important; backdrop-filter: blur(10px) !important; border: 1px solid rgba(255, 255, 255, 0.2) !important; box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37) !important; border-radius: 1.5rem !important;">
        <div class="logo-container" style="margin-bottom: 2rem; text-align: center; flex-direction: column;">
            <div
                style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 50%; display: inline-flex; margin-bottom: 0.5rem; border: 1px solid #000000;">
                <i class="ph ph-user-plus" style="font-size: 2.5rem; color: #000000;"></i>
            </div>
            <h1 class="text-gradient"
                style="font-size: 1.5rem; margin-top: 0.5rem; font-weight: 800; color: #000000 !important; background: none; -webkit-text-fill-color: initial; text-shadow: 0 1px 1px rgba(255,255,255,0.5);">
                Unirse al Equipo
            </h1>
        </div>

        <div id="register-form-container">
            <form onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label for="register-email"
                        style="color: #000000; margin-left: 0.25rem; font-weight: 700;">Email</label>
                    <div style="position: relative;">
                        <i class="ph ph-envelope"
                            style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>
                        <input type="email" id="register-email" required autocomplete="email" class="glass-input"
                            style="padding-left: 2.75rem; width: 100%; color: #000000 !important; font-weight: 600; border: 1px solid rgba(0,0,0,0.2) !important;"
                            placeholder="ejemplo@email.com">
                    </div>
                </div>
                <div class="form-group">
                    <label for="register-username"
                        style="color: #000000; margin-left: 0.25rem; font-weight: 700;">Usuario</label>
                    <div style="position: relative;">
                        <i class="ph ph-user"
                            style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>
                        <input type="text" id="register-username" required autocomplete="username" class="glass-input"
                            style="padding-left: 2.75rem; width: 100%; color: #000000 !important; font-weight: 600; border: 1px solid rgba(0,0,0,0.2) !important;"
                            placeholder="Nombre de usuario">
                    </div>
                </div>

                <div class="form-group">
                    <label for="register-password"
                        style="color: #000000; margin-left: 0.25rem; font-weight: 700;">Contraseña</label>
                    <div class="password-wrapper" style="position: relative;">
                        <i class="ph ph-lock-key"
                            style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>
                        <div id="password-requirements-tooltip"
                            style="position: absolute; bottom: 100%; left: 0; margin-bottom: 0.5rem; width: 100%; background: rgba(0, 0, 0, 0.9); color: white; padding: 0.75rem; border-radius: 0.5rem; font-size: 0.8rem; z-index: 20; opacity: 0; visibility: hidden; transition: all 0.3s ease; pointer-events: none; border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
                            <div
                                style="position: absolute; bottom: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 6px solid rgba(0, 0, 0, 0.9);">
                            </div>
                            <ul style="padding-left: 1.2rem; margin: 0; list-style-type: none;">
                                <li style="margin-bottom: 0.25rem;"><i class="ph ph-check-circle"
                                        style="margin-right: 0.3rem; font-size: 0.9rem;"></i>Mínimo 6 caracteres</li>
                                <li style="margin-bottom: 0.25rem;"><i class="ph ph-check-circle"
                                        style="margin-right: 0.3rem; font-size: 0.9rem;"></i>1 mayúscula y 1 número</li>
                                <li><i class="ph ph-check-circle" style="margin-right: 0.3rem; font-size: 0.9rem;"></i>1
                                    carácter especial (@, #)</li>
                            </ul>
                        </div>
                        <input type="password" id="register-password" required autocomplete="new-password"
                            class="glass-input"
                            style="padding-left: 2.75rem; padding-right: 2.5rem; width: 100%; color: #000000 !important; font-weight: 600; border: 1px solid rgba(0,0,0,0.2) !important;"
                            placeholder="••••••••" onfocus="showPasswordTooltip('password-requirements-tooltip')"
                            onblur="hidePasswordTooltip('password-requirements-tooltip')">
                        <button type="button" class="btn-icon-eye"
                            onclick="togglePasswordVisibility('register-password')"
                            style="position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #000000;">
                            <i class="ph ph-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="register-confirm-password"
                        style="color: #000000; margin-left: 0.25rem; font-weight: 700;">Confirmar Contraseña</label>
                    <div class="password-wrapper" style="position: relative;">
                        <i class="ph ph-lock-key"
                            style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #000000; font-size: 1.2rem;"></i>

                        <div id="confirm-password-requirements-tooltip"
                            style="position: absolute; bottom: 100%; left: 0; margin-bottom: 0.5rem; width: 100%; background: rgba(0, 0, 0, 0.9); color: white; padding: 0.75rem; border-radius: 0.5rem; font-size: 0.8rem; z-index: 20; opacity: 0; visibility: hidden; transition: all 0.3s ease; pointer-events: none; border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
                            <div
                                style="position: absolute; bottom: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 6px solid rgba(0, 0, 0, 0.9);">
                            </div>
                            <ul style="padding-left: 1.2rem; margin: 0; list-style-type: none;">
                                <li style="margin-bottom: 0.25rem;"><i class="ph ph-check-circle"
                                        style="margin-right: 0.3rem; font-size: 0.9rem;"></i>Debe coincidir con la
                                    anterior</li>
                            </ul>
                        </div>

                        <input type="password" id="register-confirm-password" required autocomplete="new-password"
                            class="glass-input"
                            style="padding-left: 2.75rem; padding-right: 2.5rem; width: 100%; color: #000000 !important; font-weight: 600; border: 1px solid rgba(0,0,0,0.2) !important;"
                            placeholder="••••••••"
                            onfocus="showPasswordTooltip('confirm-password-requirements-tooltip')"
                            onblur="hidePasswordTooltip('confirm-password-requirements-tooltip')">
                        <button type="button" class="btn-icon-eye"
                            onclick="togglePasswordVisibility('register-confirm-password')"
                            style="position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #000000;">
                            <i class="ph ph-eye"></i>
                        </button>
                    </div>
                </div>

                <!-- Turnstile Widget (Dynamic Key) -->
                <div class="cf-turnstile" data-sitekey="{{ TURNSTILE_SITE_KEY }}"
                    style="margin-bottom: 1rem; display: flex; justify-content: center; transform: scale(0.9);">
                </div>

                <button type="submit" class="glass-btn" style="width: 100%;">Registrarse</button>
            </form>
            <div
                style="margin-top: 1.5rem; display: flex; flex-direction: column; gap: 1rem; align-items: center; width: 100%;">
                <p style="font-size: 0.9rem; color: #000000; font-weight: 600;">
                    ¿Ya tienes cuenta? <a href="login.html"
                        style="color: #000000 !important; font-weight: 800; text-decoration: none; border-bottom: 1px dashed #000000;">Ingresa
                        aquí</a>
                </p>
                <a href="inicio.html"
                    style="color: #000000; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; font-size: 0.9rem; font-weight: 600; margin-top: 1rem;">
                    <i class="ph ph-arrow-left"></i> Volver al Inicio
                </a>
            </div>
        </div>
    </section>

    <script>
        // Password Tooltip Logic
        function showPasswordTooltip(tooltipId) {
            const tooltip = document.getElementById(tooltipId);
            if (tooltip) {
                tooltip.style.opacity = '1';
                tooltip.style.visibility = 'visible';
                tooltip.style.transform = 'translateY(-5px)';
            }
        }

        function hidePasswordTooltip(tooltipId) {
            const tooltip = document.getElementById(tooltipId);
            if (tooltip) {
                tooltip.style.opacity = '0';
                tooltip.style.visibility = 'hidden';
                tooltip.style.transform = 'translateY(0)';
            }
        }

        function togglePasswordVisibility(fieldId) {
            const field = document.getElementById(fieldId);
            const icon = field.parentElement.querySelector('.btn-icon-eye i');
            if (field.type === 'password') {
                field.type = 'text';
                icon.classList.remove('ph-eye');
                icon.classList.add('ph-eye-slash');
            } else {
                field.type = 'password';
                icon.classList.remove('ph-eye-slash');
                icon.classList.add('ph-eye');
            }
        }
    </script>
</body>

</html>